---
import Button from "../atoms/Button.astro";
import HandLoveYou from "@/icons/HandLoveYou.astro";

import { getLangFromUrl, useTranslations } from '@/i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<nav
  class="w-full flex justify-between items-start md-[320px]:items-center gap-3 space-y-4 max-[320px]:flex-col max-[320px]:gap-2"
>
  <p class="flex items-center gap-2 text-lg whitespace-nowrap">
    <HandLoveYou />
    {t("topNavigation.Greeting")} <strong class="underline-animate">Lucas Navarro</strong>
  </p>
  <div class="flex items-center gap-3">
    <Button
      variant="secondary"
      size="icon"
      aria-label="Cambiar de idioma a espaÃ±ol"
      href={t("topNavigation.langToChange.url") as string}
    >
      {t("topNavigation.langToChange")}
    </Button>
  </div>
</nav>

<style>
  @keyframes underline-grow {
    from {
      background-size: 0% 2px;
    }
    to {
      background-size: 100% 2px;
    }
  }

  .underline-animate {
    position: relative;
    display: inline-block;
    background-image: linear-gradient(currentColor, currentColor);
    background-repeat: no-repeat;
    background-position: 0 100%;
    background-size: 0% 2px;
    --duration: 1.2s;
    animation: underline-grow var(--duration) ease forwards;
  }

  @keyframes wave {
    0% {
      transform: rotate(0deg);
    }
    10% {
      transform: rotate(14deg);
    }
    20% {
      transform: rotate(-8deg);
    }
    30% {
      transform: rotate(14deg);
    }
    40% {
      transform: rotate(-4deg);
    }
    50% {
      transform: rotate(10deg);
    }
    60% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(0deg);
    }
  }

  .animate-wave {
    animation: wave 2s ease-in-out infinite;
    transform-origin: 70% 70%;
    display: inline-block;
  }
</style>
